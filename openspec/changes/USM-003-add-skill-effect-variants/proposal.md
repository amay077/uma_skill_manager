# スキル効果バリアント対応

## Why

現在のスキルデータ構造は 1 スキル = 1 効果セットとして設計されているが、元データ（umasim_skill.txt）には以下のパターンが存在する:

1. **条件分岐効果**: 追加条件を満たすと効果が増強される（例: きせき・おもい・かなで）
2. **連続発動効果**: 「A の後 B」で発動する 2 段階条件（例: 全力 V サインッ！）
3. **多段発動効果**: 1 回目の発動が 2 回目以降のトリガーとなる N 段発動（例: ミンナノアタシへ！、エンジン点火！）

多段発動効果では、2 回目以降の効果がメリット（ボーナス）の場合もデメリット（副作用）の場合もある。また、将来のゲーム拡張で 3 段以上の発動も想定される。

これらを正しく表現できないと、スキル検索や比較で不正確な情報を返してしまう。

## What Changes

- パーサーの拡張: 複数効果パターンのパース対応
- 型定義の拡張: `EffectVariant` 型の追加（effect_order + is_demerit）
- DB スキーマの拡張: `skill_effect_variants` テーブルの追加
- インポート処理の拡張: 効果バリアントのインポート対応
- 検索クエリの拡張: 効果バリアントを考慮した検索

## Impact

- **Affected specs**: skill-database（テーブル追加）, skill-parser（パーサー拡張）
- **Affected code**: `src/parser/`, `src/types/`, `src/db/`
- **Breaking changes**:
  - `Skill.effectParameters` は最大効果のまま維持（後方互換）
  - 新規に `Skill.effectVariants` を追加
