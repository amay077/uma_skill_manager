# Proposal: add-unrestricted-filter-option

## Summary

ビットフラグ系フィルター（距離・作戦・バ場・フェーズ）に「制限なし」オプションを追加し、全ビット ON のスキル（条件制限のないスキル）のみを抽出できるようにする。

## Motivation

現在の仕様では「全 OFF = 全 ON = 条件なし = 全スキル対象」となっており、「距離制限のないスキルのみを抽出したい」というニーズに対応できない。

**例**: 距離フィルター全 OFF で検索すると、短距離限定スキル（ふわもこアワー等）もヒットしてしまう。

### データ分布

| フィルター | 全ビット ON 件数 | 割合 |
|-----------|-----------------|------|
| 距離 (1111) | 1,366 | 65% |
| 作戦 (1111) | 1,420 | 68% |
| バ場 (11) | 1,826 | 93% |
| フェーズ (111) | 578 | 28% |

## Scope

- **Modified Specs**: skill-search-frontend

## Design Overview

### UI 変更

各ビットフラグフィルターに「制限なし」チェックボックスを追加（他の選択肢と排他）:

```
距離:     [短距離] [マイル] [中距離] [長距離] | [制限なし]
作戦:     [逃げ] [先行] [差し] [追込] | [制限なし]
バ場:     [芝] [ダート] | [制限なし]
フェーズ: [序盤] [中盤] [終盤] | [制限なし]
```

### 動作仕様

| 操作 | 結果 |
|------|------|
| 「制限なし」ON | 他の選択肢が自動 OFF |
| 他の選択肢 ON | 「制限なし」が自動 OFF |
| 全 OFF | 条件なし（全スキル対象）- 従来通り |

### 検索ロジック

| 状態 | SQL 条件 |
|------|----------|
| 全 OFF | なし（全スキル） |
| 一部 ON | 該当ビットの OR 検索 |
| 制限なしのみ ON | `flags = '1111'` (or `'11'`, `'111'`) |

## References

- GitHub Issue: https://github.com/amay077/uma_skill_manager/issues/13
- Plan file: [polymorphic-shimmying-ripple.md](../../../.claude/plans/polymorphic-shimmying-ripple.md) (参考資料)
