# ã‚¦ãƒå¨˜ã‚¹ã‚­ãƒ«æ¤œç´¢ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…è¨ˆç”»

> ã“ã®è¨ˆç”»ã¯ Claude Code ã® Plan mode ã§ä½œæˆã•ã‚ŒãŸå‚è€ƒè³‡æ–™ã§ã™ã€‚

## æ¦‚è¦

VanillaJS + DuckDB-WASM ã§ SQLite DB ã‚’èª­ã¿è¾¼ã‚€ã‚¹ã‚­ãƒ«æ¤œç´¢ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚

| é …ç›® | å†…å®¹ |
|------|------|
| é…ä¿¡æ–¹å¼ | é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆGitHub Pagesï¼‰ |
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | VanillaJSï¼ˆãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ãªã—ï¼‰ |
| DB ã‚¢ã‚¯ã‚»ã‚¹ | DuckDB-WASM + sqlite_scanner |
| UI ã‚¹ã‚³ãƒ¼ãƒ— | è©³ç´°æ¤œç´¢ï¼ˆç™ºå‹•æ¡ä»¶ãƒ»åŠ¹æœå«ã‚€ï¼‰ |

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
uma/
â”œâ”€â”€ index.html                 # ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ data/
â”‚   â””â”€â”€ uma.db                 # SQLite DBï¼ˆæ—¢å­˜ã€2.3MBï¼‰
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css              # ã‚¹ã‚¿ã‚¤ãƒ«
â””â”€â”€ js/
    â”œâ”€â”€ app.js                 # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒª
    â”œâ”€â”€ db/
    â”‚   â”œâ”€â”€ init.js            # DuckDB-WASM åˆæœŸåŒ–
    â”‚   â”œâ”€â”€ queries.js         # ã‚¯ã‚¨ãƒªé–¢æ•°
    â”‚   â””â”€â”€ constants.js       # ãƒ“ãƒƒãƒˆãƒ•ãƒ©ã‚°å®šç¾©
    â””â”€â”€ components/
        â”œâ”€â”€ SearchForm.js      # æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ 
        â”œâ”€â”€ SkillCard.js       # ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰
        â”œâ”€â”€ FilterPanel.js     # è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿
        â””â”€â”€ Pagination.js      # ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
```

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: MVPï¼ˆåŸºæœ¬æ¤œç´¢ï¼‰

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« |
|---|--------|--------------|
| 1 | DuckDB-WASM åˆæœŸåŒ– | `js/db/init.js` |
| 2 | åŸºæœ¬ã‚¯ã‚¨ãƒªå®Ÿè£… | `js/db/queries.js` |
| 3 | HTML ã‚·ã‚§ãƒ«ä½œæˆ | `index.html` |
| 4 | æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  | `js/components/SearchForm.js` |
| 5 | ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰è¡¨ç¤º | `js/components/SkillCard.js` |
| 6 | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ | `js/components/Pagination.js` |
| 7 | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° | `css/style.css` |
| 8 | ã‚¢ãƒ—ãƒªçµ±åˆ | `js/app.js` |

### Phase 2: è©³ç´°æ¤œç´¢

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« |
|---|--------|--------------|
| 1 | ãƒ“ãƒƒãƒˆãƒ•ãƒ©ã‚°å®šç¾© | `js/db/constants.js` |
| 2 | advancedSearch ç§»æ¤ | `js/db/queries.js` |
| 3 | ãƒ•ã‚£ãƒ«ã‚¿ãƒ‘ãƒãƒ« UI | `js/components/FilterPanel.js` |
| 4 | è©³ç´°æ¤œç´¢çµ±åˆ | `js/app.js` |

### Phase 3: UX æ”¹å–„ï¼ˆå°†æ¥ï¼‰

- IndexedDB ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- URL ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¯¾å¿œ
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰

## DuckDB-WASM åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰

```javascript
// js/db/init.js
import * as duckdb from 'https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@latest/+esm';

let db = null;
let conn = null;

export async function initDatabase() {
  // ãƒãƒ³ãƒ‰ãƒ«é¸æŠ
  const JSDELIVR_BUNDLES = duckdb.getJsDelivrBundles();
  const bundle = await duckdb.selectBundle(JSDELIVR_BUNDLES);

  // Worker è¨­å®š
  const worker_url = URL.createObjectURL(
    new Blob([`importScripts("${bundle.mainWorker}");`], { type: 'text/javascript' })
  );
  const worker = new Worker(worker_url);
  const logger = new duckdb.ConsoleLogger();

  // DuckDB ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆ
  db = new duckdb.AsyncDuckDB(logger, worker);
  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);
  URL.revokeObjectURL(worker_url);

  // SQLite ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
  const response = await fetch('./data/uma.db');
  const buffer = await response.arrayBuffer();
  await db.registerFileBuffer('uma.db', new Uint8Array(buffer));

  // æ¥ç¶šãƒ»æ‹¡å¼µæ©Ÿèƒ½ãƒ­ãƒ¼ãƒ‰
  conn = await db.connect();
  await conn.query(`LOAD sqlite`);
  await conn.query(`ATTACH 'uma.db' AS uma (TYPE sqlite)`);

  return conn;
}

export function getConnection() {
  return conn;
}
```

## æ¤œç´¢ UI ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¦ãƒå¨˜ã‚¹ã‚­ãƒ«æ¤œç´¢                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚¹ã‚­ãƒ«å: [________________] [æ¤œç´¢]                 â”‚
â”‚ ç¨®åˆ¥: â—‹å…¨ã¦ â—‹å›ºæœ‰ â—‹é€²åŒ– â—‹é€šå¸¸                    â”‚
â”‚ è©•ä¾¡ç‚¹: [100] ã€œ [500]                              â”‚
â”‚ [â–¼ è©³ç´°æ¤œç´¢ã‚’è¡¨ç¤º]                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã€è©³ç´°æ¤œç´¢ã€‘                                        â”‚
â”‚ ä½œæˆ¦: â–¡é€ƒ â–¡å…ˆ â–¡å·® â–¡è¿½  è·é›¢: â–¡çŸ­ â–¡ãƒ â–¡ä¸­ â–¡é•·    â”‚
â”‚ ãƒå ´: â–¡èŠ â–¡ãƒ€  ãƒ•ã‚§ãƒ¼ã‚º: â–¡åº â–¡ä¸­ â–¡çµ‚              â”‚
â”‚ åŠ¹æœ: â—‹å…¨ â—‹é€Ÿåº¦ â—‹åŠ é€Ÿ â—‹å›å¾© â—‹ä½ç½® â—‹ãƒ‡ãƒãƒ•       â”‚
â”‚ é †ä½: â—‹å…¨ â—‹1ä½ â—‹2ä½ä»¥å†… â—‹4ä½ä»¥å†… ...             â”‚
â”‚ â–¡ãƒ‡ãƒ¡ãƒªãƒƒãƒˆé™¤å¤–                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¤œç´¢çµæœ: 150ä»¶                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ã€å›ºæœ‰ã€‘æ³¢ä¹±æ³¨æ„ç ²ï¼              è©•ä¾¡ç‚¹: 240    â”‚ â”‚
â”‚ â”‚[ãƒ¬ãƒƒãƒ‰ã‚¹ãƒˆãƒ©ã‚¤ãƒ•]ã‚´ãƒ¼ãƒ«ãƒ‰ã‚·ãƒƒãƒ—                 â”‚ â”‚
â”‚ â”‚ãƒ¬ãƒ¼ã‚¹ä¸­é–“ä»˜è¿‘ã§å¾Œæ–¹ã«ã„ã‚‹ã¨...                  â”‚ â”‚
â”‚ â”‚ğŸƒé€ƒå…ˆå·®è¿½ ğŸ“çŸ­ãƒä¸­é•· ğŸŒ¿èŠãƒ€ ğŸ“åºä¸­çµ‚            â”‚ â”‚
â”‚ â”‚[â–¼ è©³ç´°]                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [<å‰ã¸] 1 2 3 ... [æ¬¡ã¸>]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å‚ç…§ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|----------|------|
| [src/db/queries.ts](src/db/queries.ts) | ã‚¯ã‚¨ãƒªãƒ­ã‚¸ãƒƒã‚¯ç§»æ¤å…ƒ |
| [src/db/schema.sql](src/db/schema.sql) | ã‚¹ã‚­ãƒ¼ãƒãƒ»ãƒ“ãƒ¥ãƒ¼å®šç¾© |
| [data/uma.db](data/uma.db) | é…ä¿¡å¯¾è±¡ DB |

## æŠ€è¡“çš„æ³¨æ„ç‚¹

1. **CORS**: SQLite ãƒ•ã‚¡ã‚¤ãƒ«ã¯åŒä¸€ã‚ªãƒªã‚¸ãƒ³é…ä¿¡
2. **ãƒ¡ãƒ¢ãƒª**: 2.3MB DB ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã§å•é¡Œãªãå‡¦ç†å¯èƒ½
3. **gzip**: GitHub Pages ã¯è‡ªå‹•åœ§ç¸®ï¼ˆ700KB ç¨‹åº¦ã«å‰Šæ¸›ï¼‰
4. **ãƒ–ãƒ©ã‚¦ã‚¶**: Chrome 80+, Firefox 75+, Safari 14+, Edge 80+

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. `index.html` ã¨ `js/db/init.js` ã‹ã‚‰å®Ÿè£…é–‹å§‹
2. åŸºæœ¬æ¤œç´¢ã‚’å‹•ä½œç¢ºèªå¾Œã€è©³ç´°æ¤œç´¢ã‚’è¿½åŠ 
